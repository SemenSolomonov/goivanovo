// База знаний об архитектурных памятниках Иваново для ИИ-чата
const ChatKnowledge = {
    // Приветствия и базовые вопросы
    greetings: [
        "Рад вас видеть! Я ваш гид по архитектурным памятникам Иваново. Чем могу помочь?",
        "Здравствуйте! Готов рассказать вам об уникальной архитектуре нашего города.",
        "Приветствую! Задавайте любые вопросы об исторических зданиях и памятниках Иваново.",
        "Добро пожаловать в мир архитектуры Иваново! О чем хотите узнать?",
        "Привет! Я здесь, чтобы помочь вам открыть архитектурные сокровища Иваново."
    ],

    // Прощания
    farewell: [
        "Буду рад помочь вам снова! До новых встреч!",
        "Если возникнут еще вопросы по архитектуре Иваново - обращайтесь!",
        "Всего доброго! Надеюсь, моя информация была полезной.",
        "Удачи в изучении архитектурного наследия Иваново!",
        "До свидания! Возвращайтесь за новой информацией о памятниках."
    ],

    // Благодарности
    thanks: [
        "Всегда рад помочь! Есть еще вопросы по архитектуре?",
        "Пожалуйста! Обращайтесь, если нужно узнать больше.",
        "Рад, что смог помочь! Архитектура Иваново действительно уникальна.",
        "Не стоит благодарности! Это моя работа - рассказывать о культурном наследии.",
        "Спасибо за обращение! Задавайте еще вопросы, я с удовольствием отвечу."
    ],

    // Общая информация об архитектуре Иваново
    architecture: [
        "Иваново часто называют 'городом конструктивизма' и 'текстильной столицей России'. Архитектура сочетает купеческие особняки XIX века и авангардные постройки 1920-30-х годов.",
        "Ключевые архитектурные стили в Иваново: 1) Конструктивизм (1920-30-е) 2) Модерн (начало XX в.) 3) Классицизм (XIX в.) 4) Русский стиль 5) Советский модернизм (1960-70-е).",
        "Архитектура Иваново делится на три основных периода: дореволюционный (купеческие дома и фабрики), конструктивистский (эпоха авангарда) и послевоенный (советский модернизм).",
        "Иваново сохранило более 200 памятников архитектуры, 50 из которых имеют федеральное значение. Многие здания признаны шедеврами мирового значения.",
        "Уникальность архитектуры Иваново в том, что здесь можно проследить всю историю русской архитектуры от классицизма до современности на примере одного города."
    ],

    // Конструктивизм - главная тема
    constructivism: [
        "Конструктивизм в Иваново представлен выдающимися памятниками: Дом-корабль (1930), Ивсельбанк (1927), Дом коллектива (1931), 100-квартирный дом (1934), Дом-подкова (1934).",
        "Иваново называют 'столицей конструктивизма' - здесь сохранилось более 50 зданий этого стиля. Это настоящий музей под открытым небом!",
        "Характерные черты ивановского конструктивизма: динамичные формы, ленточные окна, сочетание разных объемов, функциональность, отсутствие декора, использование новых материалов (стекло, бетон).",
        "Дом-корабль на улице Шестернина - самый известный памятник конструктивизма. Архитектор Д.Ф. Фридман создал здание, напоминающее нос корабля. Сейчас это жилой дом.",
        "Многие конструктивистские здания строились как дома-коммуны с общими кухнями, столовыми и прачечными. Это отражало идеи нового быта после революции 1917 года."
    ],

    // Историческая архитектура
    history: [
        "Исторический центр Иваново формировался в XIX веке как центр текстильной промышленности. Город вырос из села Иваново и Вознесенского посада.",
        "Многие архитектурные памятники связаны с династиями иваново-вознесенских фабрикантов: Бурылины, Гарелины, Куваевы, Дербеневы, Ямановские.",
        "Старейшее сохранившееся здание - Щудровская палатка (конец XVII века), бывшая приказная изба села Иваново. Это памятник гражданской архитектуры допетровской Руси.",
        "В XIX веке сложился характерный 'краснокирпичный стиль' - фабричные здания и особняки из красного кирпича с белыми деталями. Пример - комплекс фабрики Н.Г. Бурылина.",
        "После получения статуса города в 1871 году Иваново-Вознесенск стал активно застраиваться каменными зданиями: гимназии, училища, больницы, храмы."
    ],

    // Памятники и достопримечательности
    monuments: [
        "ТОП-10 памятников архитектуры Иваново: 1) Дом-корабль 2) Щудровская палатка 3) Усадьба Бурылина 4) Ивсельбанк 5) Дом-подкова 6) Введенская церковь 7) Здание мужской гимназии 8) Дом коллектива 9) 100-квартирный дом 10) Музей промышленности и искусства.",
        "Рекомендую маршрут по проспекту Ленина: начните от площади Революции, пройдите мимо Ивсельбанка, Дома-корабля, завершите у Введенской церкви. Все главные достопримечательности в шаговой доступности.",
        "Обязательно посетите: комплекс зданий ИГХТУ (советский модернизм 1960-х), Казанскую церковь (русский стиль), здание цирка (уникальная конструкция).",
        "Для любителей промышленной архитектуры: комплекс фабрики Н.Г. Бурылина, Механический завод Зубкова, Коровиновская мануфактура, фабрика Ямановских.",
        "Не пропустите деревянную архитектуру: дом-музей семьи Бубновых, особняки в Заречье, дачи фабрикантов на старых окраинах города."
    ],

    // Музеи и культурные учреждения
    museums: [
        "Музей ивановского ситца расположен в особняке Д.Г. Бурылина (1914 г.) в стиле модерн. Коллекция включает более 500 тысяч образцов тканей.",
        "Ивановский областной художественный музей находится в здании бывшего Реального училища (1886 г., архитектор П.В. Троицкий). Коллекция - русское и западноевропейское искусство.",
        "Музей промышленности и искусства (основан в 1914 году Д.Г. Бурылиным) имеет уникальные коллекции: оружие, нумизматика, декоративно-прикладное искусство Европы и Востока.",
        "Дом-музей семьи Бубновых - деревянный особняк в исторической части города, где жил революционер А.С. Бубнов. Экспозиция о жизни иваново-вознесенской интеллигенции.",
        "В здании Ивсельбанка сейчас расположен Музей советского быта с коллекцией предметов 1920-1980-х годов. Отличное место, чтобы почувствовать дух эпохи."
    ],

    // Маршруты и экскурсии
    routes: [
        "Пешеходный маршрут 'Конструктивизм в Иваново' (2-3 часа): Дом-корабль → Ивсельбанк → Дом коллектива → 100-квартирный дом → Дом-подкова → Здание облсовета.",
        "Исторический маршрут (2 часа): Щудровская палатка → Особняк Бурылина → Здание мужской гимназии → Введенская церковь → Торговые ряды на площади Революции.",
        "Рекомендую начать экскурсию с площади Революции (бывшей Георгиевской) - исторического центра. Здесь находятся сразу несколько архитектурных памятников разных эпох.",
        "Тематический маршрут 'Купеческое Иваново': особняки Бурылиных, Гарелиных, Дербеневых, Ямановских; фабричные комплексы; торговые ряды.",
        "Вечерняя экскурсия по подсвеченным зданиям в центре города особенно красива. Лучшие виды: Дом-корабль, Введенская церковь, здание драматического театра."
    ],

    // Архитекторы и строители
    architects: [
        "Д.Ф. Фридман - автор Дома-корабля (1930) и других конструктивистских зданий в Иваново. Работал в мастерской Моссовета, представитель рационализма.",
        "А.А. Стаборовский - построил здание Ивсельбанка (1927) и Дома коллектива (1931). Один из ведущих архитекторов ивановского конструктивизма.",
        "В.А. Веснин и А.А. Веснин - известные московские конструктивисты, работавшие в Иваново. Участвовали в проектировании промышленных зданий.",
        "П.А. Трубников - местный архитектор, автор многих купеческих особняков в стиле модерн и неоклассицизма. Работал в начале XX века.",
        "С.В. Никитин - ивановский архитектор, проектировал промышленные здания и жилые дома в XIX веке. Представитель 'краснокирпичного стиля'."
    ],

    // Архитектурные стили подробно
    styles: [
        "Конструктивизм (1920-1930-е): лаконичность, геометричность, функциональность. Отказ от декора, новые материалы (стекло, бетон, сталь). Примеры: Дом-корабль, Ивсельбанк.",
        "Модерн (начало XX века): плавные линии, растительные орнаменты, асимметрия, витражные окна. Пример: особняк Бурылина, здание торговой школы.",
        "Классицизм (XIX век): симметрия, колонны, портики, треугольные фронтоны. Пример: здание мужской гимназии, дом губернатора.",
        "Русский стиль (конец XIX века): элементы древнерусской архитектуры, шатры, кокошники, узорочье. Пример: Казанская церковь, Владимирская церковь.",
        "Советский модернизм (1960-1970-е): монументальность, бетон, стекло, свободные планы. Пример: здание ИГХТУ, Дворец искусств."
    ],

    // Фабричная архитектура
    factories: [
        "Фабрика Н.Г. Бурылина (конец XIX в.) - образец промышленной архитектуры в 'краснокирпичном стиле'. Сохранились производственные корпуса, склады, контора.",
        "Коровиновская мануфактура (основана в 1820-е) - одна из старейших фабрик. Комплекс включает здания разных периодов от классицизма до модерна.",
        "Фабрика Ямановских (1880-е) - характерный пример фабричной архитектуры с элементами эклектики. Сохранилась водонапорная башня - местная доминанта.",
        "Механический завод Зубкова (1900-е) - интересен чугунными конструкциями, стеклянными перекрытиями. Пример использования новых технологий.",
        "Текстильные фабрики Иваново отличались рациональной планировкой, функциональностью, но при этом имели представительные фасады, подчеркивавшие статус владельцев."
    ],

    // Современная архитектура
    modern: [
        "Здание Ивановского цирка (1980) - уникальная конструкция в виде усеченного конуса. Архитекторы Г.В. Александров, С.Г. Гришин.",
        "Дворец искусств (1970) - пример советского модернизма с монументальными формами и обширным остеклением.",
        "Новые жилые комплексы в центре часто стилизуют под конструктивизм, отдавая дань архитектурной традиции города.",
        "Бизнес-центры и офисные здания XXI века стараются гармонировать с исторической застройкой, используя современные материалы в классических пропорциях.",
        "Современные общественные здания (библиотеки, спортивные комплексы) сочетают функциональность с выразительными формами, продолжая традиции авангарда."
    ],

    // Практическая информация
    practical: [
        "Лучшее время для осмотра архитектуры: с мая по сентябрь, когда все здания хорошо видны. Зимой тоже красиво, особенно после снегопада.",
        "Большинство памятников находятся в центре города, их можно обойти пешком за день. Берите удобную обувь!",
        "Экскурсии проводят краеведческий музей и частные гиды. Есть аудиогиды для самостоятельного осмотра.",
        "Многие памятники - жилые дома, уважайте покой жителей. Фотографировать можно, но без вторжения в частную жизнь.",
        "Карты архитектурных маршрутов можно получить в туристическом информационном центре на площади Революции."
    ],

    // Помощь и инструкции
    help: [
        "Я могу рассказать о: 1) Конструктивизме 2) Исторических зданиях 3) Музеях 4) Архитекторах 5) Маршрутах 6) Фабричной архитектуре 7) Стилях",
        "Задайте вопрос о конкретном здании, архитектурном стиле или попросите рекомендовать маршрут для прогулки.",
        "Примеры вопросов: 'Расскажи о Доме-корабле', 'Какие музеи посетить?', 'Что такое конструктивизм?', 'Какой маршрут выбрать?'",
        "Моя специализация - архитектурные памятники Иваново. Спросите о любом интересующем вас объекте или теме!",
        "Хотите узнать о конкретном периоде? Задайте вопрос о дореволюционной архитектуре, советском периоде или современности."
    ],

    // Неизвестные вопросы
    unknown: [
        "Интересный вопрос! К сожалению, у меня нет информации об этом. Может, спросите о конкретных памятниках архитектуры Иваново?",
        "Это выходит за рамки моей специализации. Я лучше всего разбираюсь в архитектурных памятниках Иваново.",
        "Попробуйте задать вопрос об архитектуре, музеях или истории строительства в Иваново.",
        "Моя база знаний ограничена архитектурным наследием Иваново. Спросите о зданиях, стилях или маршрутах.",
        "Не могу ответить на этот вопрос. Но могу рассказать много интересного о конструктивизме в Иваново!"
    ],

    // Функция для определения категории вопроса
    categorizeQuestion: function(question) {
        const q = question.toLowerCase().trim();

        // Приветствия
        if (/(привет|здравствуй|добрый|хай|hello|hi|доброе утро|добрый день|добрый вечер)/i.test(q)) {
            return 'greetings';
        }

        // Прощания
        if (/(пока|до свидания|прощай|удачи|всего хорошего|досвидания)/i.test(q)) {
            return 'farewell';
        }

        // Благодарности
        if (/(спасибо|благодарю|спс|thank|thanks|мерси)/i.test(q)) {
            return 'thanks';
        }

        // Помощь
        if (/(помощь|help|что ты умеешь|что можешь|помоги|подскажи|инструкция)/i.test(q)) {
            return 'help';
        }

        // Конкретные здания
        if (/(дом.*корабль|корабль|фридман|шестернина)/i.test(q)) {
            return 'constructivism';
        }
        if (/(щудровск|палатка|старейш)/i.test(q)) {
            return 'history';
        }
        if (/(бурылин|особняк|ситц)/i.test(q)) {
            return 'museums';
        }
        if (/(подков|громобой)/i.test(q)) {
            return 'monuments';
        }
        if (/(ивсельбанк|сельбанк)/i.test(q)) {
            return 'constructivism';
        }

        // Категории
        if (/(конструктивизм|авангард|советск.*архитектур|20.*30.*год)/i.test(q)) {
            return 'constructivism';
        }
        if (/(истори|старин|купец|дореволюц|19.*век)/i.test(q)) {
            return 'history';
        }
        if (/(архитектур|стил|здани|построй|сооружен)/i.test(q)) {
            return 'architecture';
        }
        if (/(памятник|достопримечательность|посмотреть|посетить|что.*посмотреть|топ|лучш)/i.test(q)) {
            return 'monuments';
        }
        if (/(музе|выставк|коллекци|экспоз)/i.test(q)) {
            return 'museums';
        }
        if (/(маршрут|экскурси|прогул|пройти|путь|дорог)/i.test(q)) {
            return 'routes';
        }
        if (/(архитектор|проектиров|автор|строил|создал)/i.test(q)) {
            return 'architects';
        }
        if (/(стиль|классицизм|модерн|готик|барокко|ренессанс|эклектик)/i.test(q)) {
            return 'styles';
        }
        if (/(фабрик|завод|производств|промышлен|мануфактур)/i.test(q)) {
            return 'factories';
        }
        if (/(современн|новый|недавн|21.*век|2000)/i.test(q)) {
            return 'modern';
        }
        if (/(как.*доехать|где.*находится|адрес|время.*работ|стоимость|билет|практическ|совет)/i.test(q)) {
            return 'practical';
        }

        // Вопросы что/как/где
        if (/^(что|как|где|когда|почему|зачем).{3,}/i.test(q)) {
            return 'architecture';
        }

        return 'unknown';
    },

    // Получение ответа на вопрос
    getResponse: function(question) {
        // Очищаем вопрос от лишних пробелов
        const cleanQuestion = question.trim();

        // Если вопрос слишком короткий
        if (cleanQuestion.length < 2) {
            return "Пожалуйста, задайте более развернутый вопрос об архитектуре Иваново.";
        }

        // Определяем категорию
        const category = this.categorizeQuestion(cleanQuestion);

        // Получаем массив ответов для категории
        const responses = this[category];

        // Если есть ответы в категории
        if (responses && responses.length > 0) {
            // Выбираем случайный ответ
            const randomIndex = Math.floor(Math.random() * responses.length);
            return responses[randomIndex];
        }

        // Если категория не найдена или нет ответов
        const unknownResponses = this.unknown;
        const randomUnknownIndex = Math.floor(Math.random() * unknownResponses.length);
        return unknownResponses[randomUnknownIndex];
    },

    // Функция для получения дополнительной информации по теме
    getAdditionalInfo: function(topic) {
        const topics = {
            'дом-корабль': 'Дом-корабль находится по адресу: ул. Шестернина, 13. Построен в 1930 году архитектором Д.Ф. Фридманом. Это жилой дом, но экстерьер можно осмотреть в любое время.',
            'щудровская палатка': 'Щудровская палатка расположена по адресу: ул. 10 Августа, 36а. Построена в конце XVII века. Сейчас здесь музей, открыт со вторника по воскресенье с 11:00 до 17:00.',
            'музей ситца': 'Музей ивановского ситца: ул. Батурина, 11/42. Открыт со вторника по воскресенье с 11:00 до 17:30. Стоимость билета: 150-200 рублей.',
            'ивсельбанк': 'Здание Ивсельбанка: пр. Ленина, 31. Построено в 1927 году архитектором А.А. Стаборовским. Сейчас здесь Музей советского быта.',
            'введенская церковь': 'Введенская церковь: ул. Лежневская, 118. Построена в 1907 году. Действующий храм, открыт ежедневно с 8:00 до 19:00.'
        };

        const lowerTopic = topic.toLowerCase();
        for (const key in topics) {
            if (lowerTopic.includes(key)) {
                return topics[key];
            }
        }

        return null;
    }
};

// Экспорт для использования в других файлах
if (typeof module !== 'undefined' && module.exports) {
    module.exports = ChatKnowledge;
}