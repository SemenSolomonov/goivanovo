<!DOCTYPE html>
<html lang="ru">
{% extends "base.html" %}

{% block title %}–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å{% endblock %}

{% block content %}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞–º—è—Ç–Ω–∏–∫–∏ –ò–≤–∞–Ω–æ–≤–æ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* –ò–ó–ú–ï–ù–ï–ù–ò–ï: –ë–µ–ª—ã–π —Ñ–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        body {
            font-family: 'Arial', sans-serif;
            background: white;
            min-height: 100vh;
            padding: 40px 20px;
            color: #333;
        }

        .profile-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
        }

        .profile-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #667eea;
        }

        .profile-header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .profile-header p {
            color: #666;
            font-size: 1.2rem;
        }

        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            text-align: center;
            border: 2px solid #667eea;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.15);
        }

        .stat-card h3 {
            color: #667eea;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .stat-card .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .progress-indicator {
            margin-top: 15px;
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .visited-list {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            border: 1px solid #e0e0e0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .visited-list h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
            font-size: 1.8rem;
        }

        .monuments-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .monument-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            border: 1px solid #e0e0e0;
        }

        .monument-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .monument-item img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 10px;
            border: 2px solid white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .monument-info {
            flex: 1;
        }

        .monument-info h4 {
            color: #2c3e50;
            margin-bottom: 5px;
            font-size: 1.2rem;
        }

        .monument-info p {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .visited-date {
            font-size: 0.8rem;
            color: #4CAF50;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .visited-date::before {
            content: '‚úì';
            font-size: 1rem;
        }

        .empty-state {
            text-align: center;
            padding: 60px 40px;
            color: #666;
            grid-column: 1 / -1;
        }

        .empty-state h3 {
            margin-bottom: 15px;
            color: #2c3e50;
            font-size: 1.5rem;
        }

        .empty-state p {
            margin-bottom: 25px;
            font-size: 1.1rem;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            min-width: 160px;
            text-align: center;
        }

        .btn-primary {
            background: #667eea;
            color: white;
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #4CAF50;
            color: white;
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
        }

        .btn-secondary:hover {
            background: #43a047;
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(76, 175, 80, 0.4);
        }

        .btn-logout {
            background: #FF6B6B;
            color: white;
            box-shadow: 0 4px 10px rgba(255, 107, 107, 0.3);
        }

        .btn-logout:hover {
            background: #ff5252;
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(255, 107, 107, 0.4);
        }

        .user-info {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid #e0e0e0;
        }

        .user-info p {
            margin-bottom: 10px;
            color: #555;
        }

        .user-info strong {
            color: #2c3e50;
        }

        @media (max-width: 768px) {
            .profile-container {
                padding: 25px;
            }

            .profile-header h1 {
                font-size: 2rem;
            }

            .stats-cards {
                grid-template-columns: 1fr;
            }

            .monuments-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 250px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 20px 10px;
            }

            .profile-container {
                padding: 20px;
            }

            .stat-card {
                padding: 20px;
            }

            .stat-card .stat-number {
                font-size: 2rem;
            }

            .monument-item {
                flex-direction: column;
                text-align: center;
            }

            .monument-item img {
                width: 100px;
                height: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="profile-container">
        <div class="profile-header">
            <h1>üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h1>
            <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ session.username }}!</p>
        </div>

        <div class="user-info">
            <p><strong>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</strong> {{ session.username }}</p>
            <p><strong>ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</strong> {{ session.user_id }}</p>
        </div>

        <div class="stats-cards">
            <div class="stat-card">
                <h3>–ü–æ—Å–µ—â–µ–Ω–æ —Ç–æ—á–µ–∫</h3>
                <div class="stat-number" id="visited-count">0</div>
                <div class="progress-indicator">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
            </div>

            <div class="stat-card">
                <h3>–í—Å–µ–≥–æ —Ç–æ—á–µ–∫</h3>
                <div class="stat-number">14</div>
            </div>

            <div class="stat-card">
                <h3>–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ—Å–µ—â–µ–Ω–∏—è</h3>
                <div class="stat-number" id="progress-percent">0%</div>
            </div>
        </div>

        <div class="visited-list">
            <h2>‚úÖ –ü–æ—Å–µ—â—ë–Ω–Ω—ã–µ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h2>
            <div id="visited-monuments" class="monuments-grid">
                <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –ø–æ—Å–µ—â—ë–Ω–Ω—ã–µ –ø–∞–º—è—Ç–Ω–∏–∫–∏ -->
                <div class="empty-state">
                    <h3>–í—ã –µ—â—ë –Ω–µ –æ—Ç–º–µ—Ç–∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ –ø–∞–º—è—Ç–Ω–∏–∫–∞</h3>
                    <p>–ù–∞—á–Ω–∏—Ç–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ò–≤–∞–Ω–æ–≤–æ –∏ –æ—Ç–º–µ—á–∞–π—Ç–µ –ø–æ—Å–µ—â—ë–Ω–Ω—ã–µ –º–µ—Å—Ç–∞!</p>
                    <div class="action-buttons">
                        <a href="{{ url_for('index') }}" class="btn btn-primary">–ù–∞—á–∞—Ç—å –æ—Å–º–æ—Ç—Ä –ø–∞–º—è—Ç–Ω–∏–∫–æ–≤</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <a href="{{ url_for('index') }}" class="btn btn-primary">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
            {% if session.user_id %}
                <a href="{{ url_for('logout') }}" class="btn btn-logout">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</a>
            {% endif %}
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –æ –ø–∞–º—è—Ç–Ω–∏–∫–∞—Ö
        const monuments = {
            '1': {
                name: "–î–æ–º-–ø—Ç–∏—Ü–∞",
                address: "–ø—Ä. –õ–µ–Ω–∏–Ω–∞, 53",
                img: "https://extraguide.ru/images/blog/2023/01-14-4t0uje-dom-ptitsa.jpg"
            },
            '2': {
                name: "–î–æ–º-–ø–æ–¥–∫–æ–≤–∞",
                address: "—É–ª. –ì—Ä–æ–º–æ–±–æ—è, 13",
                img: "https://avatars.dzeninfra.ru/get-zen_doc/4979934/pub_63245491b31f2035e8aa6f70_632454a9962ce87f2b60d26c/scale_1200"
            },
            '3': {
                name: "–î–æ–º-–∫–æ—Ä–∞–±–ª—å",
                address: "–ø—Ä–æ—Å–ø–µ–∫—Ç –õ–µ–Ω–∏–Ω–∞, 49",
                img: "https://a.d-cd.net/_Qpo5woO4G1pv5UPJB6uAaHBKxI-1920.jpg"
            },
            '4': {
                name: "–î–æ–º-–ø—É–ª—è",
                address: "–ø—Ä–æ—Å–ø–µ–∫—Ç –õ–µ–Ω–∏–Ω–∞, 37",
                img: "https://avatars.dzeninfra.ru/get-zen_doc/271828/pub_66bb52ded6f9cc628c20a63a_66bb5713979b573f13366e23/scale_1200"
            },
            '5': {
                name: "–Å–∂–∏–∫ –≤ —Ç—É–º–∞–Ω–µ",
                address: "–ø–∞—Ä–∫ –∏–º–µ–Ω–∏ –í.–Ø. –°—Ç–µ–ø–∞–Ω–æ–≤–∞",
                img: "https://parkstepanova.ru/wp-content/uploads/2024/11/UB4kdHXYLhQ.jpg"
            },
            '6': {
                name: "–ü–∞–ª—å—Ü—ã",
                address: "–ø—Ä–æ—Å–ø–µ–∫—Ç –õ–µ–Ω–∏–Ω–∞, –æ–∫–æ–ª–æ –¥–æ–º–∞ 47",
                img: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/29/b4/3f/fc/caption.jpg?w=1000&h=-1&s=1"
            },
            '7': {
                name: "–ê–ª–ª–µ—è –ª—é–±–≤–∏",
                address: "",
                img: "https://sun9-7.userapi.com/s/v1/ig2/8dP2QM53Q1LJzjuNrjNmYuD27raDr9WLEum_ITjJPLY1lMIdcToT6Bx8SFtowPv1yqkauxMJtzeTwxgLo5K9KeUl.jpg?quality=95&as=32x21,48x32,72x48,108x72,160x107,240x160,360x240,480x320,540x360,640x427,720x480,1080x721,1280x854,1400x934&from=bu&cs=1400x0"
            },
            '8': {
                name: "–í–µ—Ä–Ω–æ—Å—Ç—å",
                address: "",
                img: "https://sun9-54.userapi.com/s/v1/ig2/XU_tq774pXKCeGQ3UItQv2ktkX4AL2B-c0UBNg9cq0vg25WfLuY5xAf9WEp-bxOs4lcbyheFQlLYyW-t1bOd54A-.jpg?quality=95&as=32x21,48x32,72x48,108x72,160x107,240x160,360x240,480x320,540x360,640x427,720x480,1080x720,1280x853,1440x960,2000x1333&from=bu&cs=2000x0"
            },
            '9': {
                name: "–ú–æ–ª–µ–∫—É–ª–∞",
                address: "",
                img: "https://i3vestno.ru/images/2021/09/14/a43eeed5245743ce814a25bf42406c17.jpg"
            },
            '10': {
                name: "–í–æ–ª–∫ —Å —Ç–µ–ª—ë–Ω–∫–æ–º",
                address: "",
                img: "https://avatars.mds.yandex.net/get-altay/1371862/2a00000165c95bf333f6130bb98bff6b36d1/L_height"
            },
            '11': {
                name: "–ê–∫—É–ª–∞ –ø–µ—Ä–∞",
                address: "",
                img: "https://sun9-52.userapi.com/s/v1/ig2/EhQBUMVSsUwnxgRmv4rOWozM8L_JkyuJF9dEOffWJbjfFktbazBPiSx2MLVopKwj5GS8iQqZDt4CUSpKcPzHKfgh.jpg?quality=95&as=32x24,48x36,72x54,108x81,160x120,240x180,360x270,480x360,540x405,640x480,720x540,1024x768&from=bu&cs=1024x0"
            },
            '12': {
                name: "–ü—Ä—è–ª–∫–∞",
                address: "",
                img: "https://ivgazeta.ru/images/2017/08/31/6844df7f978d497bbcc48fa54cb6f0d1.jpg"
            },
            '13': {
                name: "–¢–∞–∫—Å–∞",
                address: "",
                img: "https://sun9-88.userapi.com/s/v1/ig2/eEAGgoFZNlwxiRwXiBQN-KmaVrTe0YZtlCmYm7jTuJ4NltzT7A4i8HlA0JYphCDVSeb5BuTJNIWj_0AGi0qL4Ctx.jpg?quality=95&as=32x24,48x36,72x54,108x81,160x120,240x180,360x270,480x360,540x405,640x480,720x540,1024x768&from=bu&cs=1024x0"
            },
            '14': {
                name: "–ü–µ—Ä–≤—ã–π —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥",
                address: "",
                img: "https://vtrip.ru/uploads/russia/ivanovo/pervyistomatolog2.jpg"
            }
        };

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
        function updateProfileVisits() {
            const visitedPlaces = JSON.parse(localStorage.getItem('visited_places') || '[]');
            const visitedCount = visitedPlaces.length;
            const totalPlaces = 14;
            const progressPercent = Math.round((visitedCount / totalPlaces) * 100);

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            document.getElementById('visited-count').textContent = visitedCount;
            document.getElementById('progress-percent').textContent = progressPercent + '%';

            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
            const progressBar = document.getElementById('progress-bar');
            progressBar.style.width = progressPercent + '%';

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫
            const visitedList = document.getElementById('visited-monuments');
            visitedList.innerHTML = '';

            if (visitedCount === 0) {
                visitedList.innerHTML = `
                    <div class="empty-state">
                        <h3>–í—ã –µ—â—ë –Ω–µ –æ—Ç–º–µ—Ç–∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ –ø–∞–º—è—Ç–Ω–∏–∫–∞</h3>
                        <p>–ù–∞—á–Ω–∏—Ç–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ò–≤–∞–Ω–æ–≤–æ –∏ –æ—Ç–º–µ—á–∞–π—Ç–µ –ø–æ—Å–µ—â—ë–Ω–Ω—ã–µ –º–µ—Å—Ç–∞!</p>
                        <div class="action-buttons">
                            <a href="{{ url_for('index') }}" class="btn btn-primary">–ù–∞—á–∞—Ç—å –æ—Å–º–æ—Ç—Ä –ø–∞–º—è—Ç–Ω–∏–∫–æ–≤</a>
                        </div>
                    </div>
                `;
                return;
            }

            visitedPlaces.forEach(placeId => {
                const monument = monuments[placeId];
                if (monument) {
                    const item = document.createElement('div');
                    item.className = 'monument-item';
                    item.innerHTML = `
                        <img src="${monument.img}" alt="${monument.name}">
                        <div class="monument-info">
                            <h4>${monument.name}</h4>
                            <p>${monument.address}</p>
                            <div class="visited-date">–ü–æ—Å–µ—â–µ–Ω–æ: —Å–µ–≥–æ–¥–Ω—è</div>
                        </div>
                    `;
                    visitedList.appendChild(item);
                }
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', updateProfileVisits);

        // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
        window.updateProfileVisits = updateProfileVisits;
    </script>
</body>

{% endblock %}
</html>